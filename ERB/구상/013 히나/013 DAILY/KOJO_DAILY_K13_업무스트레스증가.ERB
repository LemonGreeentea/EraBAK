;=====================================================
; 블루아카이브K 히나 데일리 구상 - 업무 스트레스 증가
; 구상 제작자 : 레몬녹차
; 구상 설명
;   1. 랜덤 확률로 히나의 업무 스트레스가 증가한다.
;   2. 업무 스트레스가 늘어나면 히나가 점점 힘들어한다.
;   3. 플레이어는 여러가지 행동을 통해 히나의 스트레스를 풀어줄 수 있다.
;     - 안마, 산책, 데이트(연인일 때), 야한거 등등
;
;=====================================================
;---------------------
;기본적인 발생 확률(1000분 율 100으로 10%)
;이것에 콘피그 항목의 발생 빈도를 걸칠 수 있으므로, 반드시 이 대로는 되지 않는다
;---------------------
@KOJO_DAILY_K13_WORK_STRESS_UP_RATE(대상)
#DIM 대상
;업무스트레스 이벤트 발생확률. 기본 5%지만 히나의 스트레스가 올라갈수록 확률이 늘어난다. (최대 스트레스 100, 최대확률 55%)
RETURN 50 + (100 - DVAR:히나_업무스트레스_수치) * 5

;---------------------
;확률 이외의 발생 판정
;0기 이후가 되면 발생한다든가, 데일리측에서 이용하고 있는 변수가-1이라면 일으키지 않는다  같은 튕기는 방법을 할 경우에 사용한다
;---------------------
@KOJO_DAILY_K13_WORK_STRESS_UP_DECISION(대상)
#DIM 대상
;히나가 플레이어 소속이면서 포로가 아닐 것
IF CFLAG:대상:소속 == CFLAG:MASTER:소속 && CFLAG:대상:포로처 == 0
	;히나 첫 이벤트를 무시하면 스킵한다.
	SIF DVAR:히나_업무스트레스_진행도 == 0
		RETURN 0
	SIF DVAR:히나_업무스트레스_진행도 == -1
		RETURN 0
	;히나 스트레스가 100 이상이면 스킵
	IF DVAR:히나_업무스트레스_수치 >= 100
		RETURN 0
	ENDIF
	RETURN CHECK_KOJO_DAILY_HAPPEN(대상, 1, 0)
ENDIF
RETURN 0

;---------------------
;장르
;콘피그 설정으로 사용
;---------------------
@KOJO_DAILY_K13_WORK_STRESS_UP_GENRE(대상)
#DIM 대상
RETURN 데일리_장르_에로

;---------------------
;본체
;이벤트가 발생했을 경우는 1, 발생하지 않았던 경우는 0을 돌려준다
;발생하지 않았다는 것은 예를 들면, 특정 조건을 채우는 캐릭터로부터 랜덤에 한사람 선택하는 데일리로, 원래 그 조건을 채우는 캐릭터가 한사람도 없는 것 같은 때
;구사양으로 만든 적 있는 사람용으로 말하면 「구사양의 데일리 본체 첫머리에서-1을 돌려주는 것 같은 상황」
;---------------------
@KOJO_DAILY_K13_WORK_STRESS_UP(대상)
#DIM 대상

SELECTCASE RAND:50
	CASE IS < 35
		PRINTFORML 히나는 서류더미에 둘러쌓여 있다.
		CALL FACE_IMAGE_N("표정_13_일반_13")
		PRINTFORMW 「아무리 처리해도 줄지 않아...」
		PRINTFORMW 히나는 쌓여있는 서류처리를 하느라 스트레스가 증가했다. (스트레스 + 10)
		DVAR:히나_업무스트레스_수치 += 10
		SIF DVAR:히나_업무스트레스_수치 >= 100
			DVAR:히나_업무스트레스_수치 = 100
		PRINTFORMW 현재 히나의 스트레스 : {DVAR:히나_업무스트레스_수치} / 100
	CASE IS < 50
		PRINTFORML 히나는 온천개발부가 온천을 뚫겠다며 게헨나 본관의 지하를 파고 있다는 소식을 들었다.
		CALL FACE_IMAGE_N("표정_13_일반_15")
		PRINTFORMW 「하아... 단번에 끝내주지.」
		PRINTFORMW 히나는 온천개발부의 폭거를 처리 하느라 스트레스가 많이 증가했다. (스트레스 + 30)
		DVAR:히나_업무스트레스_수치 += 30
		SIF DVAR:히나_업무스트레스_수치 >= 100
			DVAR:히나_업무스트레스_수치 = 100
		PRINTFORMW 현재 히나의 스트레스 : {DVAR:히나_업무스트레스_수치} / 100

	CASE IS < 80

	CASE IS < 100

ENDSELECT


RETURN 1
