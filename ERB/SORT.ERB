;각종 정의치(ABL, EXP, SOURCE)의 줄설정을 실시한다

;-------------------------------------------------
;ABL의 줄설정
;줄서 바꾼 ABL중에서, ARG:0번째에 대응하는 ABL의 실제의 번호를 돌려준다
;-------------------------------------------------
@GET_SORTED_ABL(ARG:0)
#FUNCTION
SELECTCASE ARG:0
	CASE 0
		RETURNF 12
	CASE 1
		RETURNF 13
	CASE 2
		RETURNF 14
	CASE 3
		RETURNF 0
	CASE 4
		RETURNF 1
	CASE 5
		RETURNF 2
	CASE 6
		RETURNF 3
	CASE 7
		RETURNF 4
	CASE 8
		RETURNF 20
	CASE 9
		RETURNF 21
	CASE 10
		RETURNF 22
	CASE 11
		RETURNF 23
	CASE 12
		RETURNF 24
	CASE 13
		RETURNF 33
	CASE 14
		RETURNF 34
	CASE 15
		RETURNF 25
	CASE 16
		RETURNF 26
	CASE 17
		RETURNF 27
	CASE 18
		RETURNF 28
	CASE 19
		RETURNF 29
	CASE 20
		RETURNF 30
ENDSELECT
RETURNF -1

;-------------------------------------------------
;EXP의 줄설정
;줄서 바꾼 EXP중에서, ARG:0번째에 대응하는 EXP의 실제의 번호를 돌려준다
;-------------------------------------------------
@GET_SORTED_EXP(ARG:0)
#FUNCTION
SELECTCASE ARG:0
	CASE 0
		RETURNF 40
	CASE 1
		RETURNF 41
	CASE 2
		RETURNF 42
	CASE 3
		RETURNF 43
	CASE 4
		RETURNF 44
	CASE 5
		RETURNF 45
	CASE 6
		RETURNF 46
	CASE 7
		RETURNF 47
	CASE 8
		RETURNF 50
	CASE 9
		RETURNF 51
	CASE 10
		RETURNF 52
	CASE 11
		RETURNF 90
	CASE 12
		RETURNF 91
	CASE 13
		RETURNF 92
	CASE 14
		RETURNF 93
	CASE 15
		RETURNF 94
	CASE 16
		RETURNF 55
	CASE 17
		RETURNF 56
	CASE 18
		RETURNF GETNUM(EXP, "임신시킨경험")
	CASE 19
		RETURNF GETNUM(EXP, "임신경험")
	CASE 20
		RETURNF 57
	CASE 21
		RETURNF 58
	CASE 22
		RETURNF 59
	CASE 23
		RETURNF 61
	CASE 24
		RETURNF 62
	CASE 25
		RETURNF 63
	CASE 26
		RETURNF 64
	CASE 27
		RETURNF 65
	CASE 28
		RETURNF 66
	CASE 29
		RETURNF GETNUM(EXP, "최면 절정경험")
ENDSELECT
RETURNF -1

;-------------------------------------------------
;SOURCE의 줄설정
;줄서 바꾼 SOURCE중에서, ARG:0번째에 대응하는 SOURCE의 실제의 번호를 돌려준다
;-------------------------------------------------
@GET_SORTED_SOURCE(ARG:0)
#FUNCTION
SELECTCASE ARG:0
	CASE 0
		RETURNF 0
	CASE 1
		RETURNF 1
	CASE 2
		RETURNF 2
	CASE 3
		RETURNF 3
	CASE 4
		RETURNF 4
	CASE 5
		RETURNF 9
	CASE 6
		RETURNF 8
	CASE 7
		RETURNF 10
	CASE 8
		RETURNF 11
	CASE 9
		RETURNF 12
	CASE 10
		RETURNF 13
	CASE 11
		RETURNF 14
	CASE 12
		RETURNF 15
	CASE 13
		RETURNF 16
	CASE 14
		RETURNF 17
	CASE 15
		RETURNF 18
	CASE 16
		RETURNF 19
	CASE 17
		RETURNF 20
	CASE 18
		RETURNF 21
	CASE 19
		RETURNF 22
	CASE 20
		RETURNF 23
	CASE 21
		RETURNF 24
	CASE 22
		RETURNF 25
	CASE 23
		RETURNF 26
	CASE 24
		RETURNF 27
	CASE 25
		RETURNF 28
	CASE 26
		RETURNF 29
	CASE 27
		RETURNF 31
	CASE 28
		RETURNF 32
	CASE 29
		RETURNF 33
	CASE 30
		RETURNF 30
	CASE 31
		RETURNF 40
	CASE 32
		RETURNF 41
	CASE 33
		RETURNF 50
	CASE 34
		RETURNF 51
ENDSELECT
RETURNF -1

;Fisher-Yates 알고리즘에 의한 셔플 배열의 작성
;전용 배열 SHAFFLE_ARRAY를 사용
;인수 0:배열의 길이（0～ARG:0-1까지의 셔플） 
;
@FISHER_YATES_SHAFFLE(ARG:0)

SIF !INRANGE(ARG:0, 1, 5000)
	THROW 인수가 이상합니다. 1～5000의 범위에서 지정해 주세요.

;SHAFFLE_ARRAY의 초기화
VARSET SHAFFLE_ARRAY , 0
FOR LOCAL:0 , 0, ARG:0
	SHAFFLE_ARRAY:(LOCAL:0) = LOCAL:0
NEXT
;셔플 처리
;선두로부터 차례로 「자신 이후의 어느쪽이든바꿔 넣어 고정한다」를 실시한다
FOR LOCAL:0 , 0 , ARG:0 - 1
	LOCAL:1 = RAND(LOCAL:0 , ARG:0)
	SWAP SHAFFLE_ARRAY:(LOCAL:0), SHAFFLE_ARRAY:(LOCAL:1)
NEXT

;종단 플래그 세트
SHAFFLE_ARRAY:(ARG:0) = -1
RETURN 0
