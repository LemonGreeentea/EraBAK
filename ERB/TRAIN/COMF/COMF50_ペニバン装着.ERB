;페페니스밴드장착

;-------------------------------------------------
;커맨드 명칭
;-------------------------------------------------
@COM_NAME50
LOCALS:0 = 페니스밴드
IF MTAR_NUM > 0
	RESULTS:0 = %LOCALS:0%장착을 과시한다
	RESULTS:1 = %LOCALS:0%장착 당해진다
	RESULTS:2 = %LOCALS:0%장착시킨다
	RESULTS:3 = %LOCALS:0%장착을 보게 된다
	RESULTS:4 = %LOCALS:0%장착시킨다
	RESULTS:5 = %LOCALS:0%장착 과시하고
ELSE
	RESULTS:0 = %조사처리(LOCALS:0,"를")% 붙인다
ENDIF

;-------------------------------------------------
;선택 가부 판정
;-------------------------------------------------
@COM_ABLE50
;공통 부분
CALL COM_ABLE_COMMON(50)
SIF RESULT == 0
	RETURN 0
;플레이어는 1명 이상 필요
SIF MPLY_NUM <= 0 
	RETURN 0
FOR LOCAL, 0, MPLY_NUM
	;플레이어가 행동불능이라면 불가
	SIF !IS_PLAYABLE(MPLY:LOCAL)
		RETURN 0
	;플레이어가 구속중이라면 불가
	SIF IS_BIND(MPLY:LOCAL)
		RETURN 0
	;플레이어에 원으로부터 장대가 있다면 불가
	SIF HAS_PENIS(MPLY:LOCAL)
		RETURN 0
	;페니스밴드가 필요
	SIF ITEM:페니스밴드 == 0 && ITEM:A_페니스밴드 == 0
		RETURN 0
	;플레이어가 성교중이라면 불가
	SIF IS_INSERT_SINGLE(MPLY:LOCAL, "전")
		RETURN 0
	;플레이어가 조개맞대기중·쌍두바이브 사용중이라면 불가
	SIF IS_EQUIP(MPLY:LOCAL, 21, 22)
		RETURN 0
	;플레이어가 자위·안면승마중이라면 불가
	SIF IS_EQUIP_PLAYER(MPLY:LOCAL, 100, 101, 102)
		RETURN 0
	;플레이어가 쿤닐링구스·지삽·Ａ애무·Ｖ피스트·Ａ피스트·전기안마·촉수삽입·촉수Ａ삽입·촉수클리고문 되고 있다면 불가
	SIF IS_EQUIP_TARGET(MPLY:LOCAL, 2, 3, 4, 87, 88, 103, 201, 202, 203)
		RETURN 0
	;이미 페니스밴드 붙이고 있다면 안 돼
	SIF IS_EQUIP_PLAYER(MPLY:LOCAL, 50)
		RETURN 0
NEXT
RETURN 1

;-------------------------------------------------
;메인 처리
;-------------------------------------------------
@COM50
PRINTFORMW %ANAME(MPLY:0)%\@ MPLY_NUM > 1 ? 들 # \@는 페니스밴드를 장착했다…

RETURN 1

;-------------------------------------------------
;지문(전문)
;-------------------------------------------------
@COM_TEXT_BEFORE50

;-------------------------------------------------
;계속 커맨드인가 어떤가를 설정
;-------------------------------------------------
@COM_IS_EQUIP50
;계속 커맨드 한편 필터링 불가
RETURN 2

;-------------------------------------------------
;계속 상태의 처리
;-------------------------------------------------
@COM_EQUIP50(ARG:0)
;특별히 이루어

;-------------------------------------------------
;계속중의 표시
;-------------------------------------------------
@EQUIP_MESSAGE50(ARG:0)
RESULTS = %조사처리(EQUIP_PLAYER_ANAME(ARG:0),"가")% 페니스밴드을 장착중

;-------------------------------------------------
;계속을 해제하기 전에 하지 않으면 되지 않는 일
;-------------------------------------------------
@COM_BEFORE_RELEASE_EQUIP50(ARG:0)
;삽입 상태를 클리어 한다
FOR LOCAL, 0, MEQUIP_PLAYER_NUM:(ARG:0)
	CALL CLEAR_INSERT_FLAG(MEQUIP_PLAYER:(ARG:0):LOCAL, "Ｐ")
NEXT


;-------------------------------------------------
;계속중의 지문(전문)
;-------------------------------------------------
@COM_TEXT_BEFORE_EQUIP50(ARG:0)

;-------------------------------------------------
;계속을 해제했을 때의 지문
;-------------------------------------------------
@COM_TEXT_RELEASE_EQUIP50(ARG:0)
PRINTFORMW %EQUIP_PLAYER_ANAME(ARG:0)%의 페니스밴드를 제외했다

;-------------------------------------------------

;커맨드 구분
;-------------------------------------------------

@COM_AVAILABLE_WHEN50
RETURN 커맨드_우후후

;--------------------
;성 기호용 함수
;--------------------
@COM_PREFERENCE_PLAYER_50()
RETURN POWER(2, 성적기호_성교하고싶다)

@COM_PREFERENCE_TARGET_50()
RETURN POWER(2, 성적기호_성교되고싶다)

